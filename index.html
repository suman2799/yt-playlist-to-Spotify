<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Another Page</title>
</head>
<body>
    <h1>Another Page</h1>
    <script>
        // Extract the code from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        
        // Log the code to the console
        if (code) {
            console.log('Authorization code:', code);
        } else {
            console.error('Authorization code not found.');
        }

        const clientId = '145abc96e9a3498f81ee180c0852430f';
        const clientSecret = 'ca03adfaabb34cf4b1f6ded93e195fe7';
        const redirectUri = 'https://accounts.spotify.com/api/token'; // Your redirect URI
        // const code = 'authorization_code'; // The authorization code obtained from the URL
        
        // Step 1: Exchange authorization code for access token
        fetch('https://accounts.spotify.com/api/token', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
          },
          body: new URLSearchParams({
            'grant_type': 'authorization_code',
            'code': code,
            'redirect_uri': redirectUri
          })
        })
        .then(response => response.json())
        .then(data => {
          const accessToken = data.access_token;

            // Log the accessToken to the console
            if (accessToken) {
                console.log('Access token:', accessToken);
            } else {
                console.error('Access token not found.');
            }
        });

    </script>
</body>
</html>
